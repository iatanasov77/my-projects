{% extends 'base.html.twig' %}

{% block content %}
	<!-- Begin Page Content -->
	<div class="container-fluid">
		<!-- Page Heading -->
          <div class="d-sm-flex align-items-center justify-content-between mb-4">
            <h1 class="h3 mb-0 text-gray-800">Projects</h1>
          </div>

          <div class="row">
		    <div class="row" style="margin: 0 0 15px 25px;">
		        <div class="btn-group" role="group" aria-label="Basic example">
		        	<button type="button" class="btn btn-primary" data-toggle="modal" data-target="#create-project-modal">
		        		Create Project
		        	</button>
		        </div>
		    </div>
		    <div class="col-lg-12">
		        
		        <section class="panel">
		        	<header class="panel-heading"><h3><strong>Projects</strong></h3></header>
		
		        	<table class="table table-striped table-advance table-hover">
		        		<thead>
		        			<tr>
		        				<th style="font-weight: bold;">Title</th>
		        				<th style="text-align:center; font-weight: bold;">Actions</th>
		        			</tr>
		        		</thead>
		        		<tbody>
		        		{% for project in projects %}
		        			<tr>
		        				<td>{{ project.title }}</td>
		        				<td width="350">
		        					{%  if vs_project_installed( project ) %}Installed{% else %}<a class="btnInstall" data-projectId="{{ project.id }}" href="javascript:void(0);">Install</a>{% endif %}
		
		        					<a class="btnOpen" data-projectId="{{ project.id }}" href="javascript:void(0);">Open</a>
									<a class="btnEdit" data-projectId="{{ project.id }}" href="javascript:void(0);">Edit</a>
									<a class="btnDelete" data-projectId="{{ project.id }}" href="javascript:void(0);">Delete</a>
		        				</td>
		        			</tr>
		        		{% endfor %}
		        		</tbody>
		        	</table>
		        </section>
		    </div>
		</div>
	</div>
	<!-- /.container-fluid -->
{% endblock %}

{% block modals %}
	{{ parent() }}
	
  	<!-- Create Project Modal-->
	{% include 'modals/project_create.html.twig' %}
{% endblock %}

{% block scripts %}
	{{ parent() }}
 <script type="text/javascript">
$(function() {
	$( '#btnSaveProject' ).on( 'click', function( e )
	{
		var form	= $( this ).closest( "form" );
		$.ajax({
			type: "POST",
		 	url: form.attr( 'action' ),
		 	data: form.serialize(),
			success: function( msg )
			{
				alert( msg );
			},
			error: function()
			{
				alert( "ERROR!!!" );
			}
       });
	});
});
</script>
{% endblock %}

